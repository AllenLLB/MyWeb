<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Header</title>
	<link rel="stylesheet" type="text/css" href="../Fcss/index.css" />
	<script type="text/javascript" src="../Fjs/jquery-1.8.3.min.js"></script>
	<script type="text/javascript" src="../Fjs/Animate.js"></script>
</head>
<body>
	<div id="container">
		<div class="main">
			<div class="side-nav">
				<div class="artLists">
					<ul class="side-lists">
						<li class="li1 toIframe" data-url="general.html">today</li>
						<li class="li2 toIframe" data-url="general.html">shaidhu</li>
						<li class="li3 toIframe" data-url="general.html">shdha</li>
						<li class="li4 toIframe" data-url="general.html">jhdahd</li>
						<li class="li5 toIframe" data-url="general.html">dajhd</li>
						<li class="li6 toIframe" data-url="general.html">dasdhuahdu</li>
						<li class="li7 toIframe" data-url="general.html">jdiajd</li>
						<li class="li8 toIframe" data-url="general.html">huahdu</li>
					</ul>
				</div>
				<div class="menuList">
					<ul>
						<li style="cursor:pointer;background:blue;color:#fff;" class="btn-menu">menu</li>
					</ul>
				</div>
			</div>
			<div class="show-win">
				<ul class="win-lists">
					<li class="li1 toIframe" data-url="general.html">today</li>
					<li class="li2 toIframe" data-url="general.html">shaidhu</li>
					<li class="li3 toIframe" data-url="general.html">shdha</li>
					<li class="li4 toIframe" data-url="general.html">jhdahd</li>
					<li class="li5 toIframe" data-url="general.html">dajhd</li>
					<li class="li6 toIframe" data-url="general.html">dasdhuahdu</li>
					<li class="li7 toIframe" data-url="general.html">jdiajd</li>
					<li class="li8 toIframe" data-url="general.html">huahdu</li>
				</ul>
			</div>
		</div>
		<ul class="index-lists">
			<li class="drag li1 toIframe" data-url="general.html">11today</li>
			<li class="drag li2 toIframe" data-url="general.html">22shaidhu</li>
			<li class="drag li3 toIframe" data-url="general.html">33shdha</li>
			<li class="drag li4 toIframe" data-url="general.html">jhdahd</li>
			<li class="drag li5 toIframe" data-url="general.html">dajhd</li>
			<li class="drag li6 toIframe" data-url="general.html">dasdhuahdu</li>
			<li class="drag li7 toIframe" data-url="general.html">jdiajd</li>
			<li class="drag li8 toIframe" data-url="general.html">huahdu</li>
		</ul>

		<div class="foot-nav">
			<ul class="nav">
				<li class="show-menu"></li>
			</ul>
		</div>
		<div class="containerWins">
			<iframe   name="containerWins" src="general.html"></iframe>
		</div>


	</div>







<script type="text/javascript">



	//先使用构造函数构造库对象
	var libo=new Libo();
	//click show menu
	var oBtn=libo.getByClass("show-menu")[0];

	//foot nav
	var footNav=libo.getByClass("foot-nav")[0];

	//menu
	var oMain=libo.getByClass("main")[0];

	//side nav
	var sideNav=libo.getByClass("side-nav")[0];
	var artLists=libo.getByClass("artLists")[0];
	var menuList=libo.getByClass("menuList")[0];
	var oBtnList=libo.getByClass("btn-menu")[0];



	//window iframe

	var showWin=libo.getByClass("show-win")[0];

	//index lists

	var indexLists=libo.getByClass("index-lists")[0];
	var aIndexLists=indexLists.getElementsByTagName("li");

	//all li to iframe
	var mainWin=libo.getByClass("containerWins")[0];
	var ListsBtns=libo.getByClass("toIframe");

	var Tiframe=document.querySelector("iframe");


	//这个标志表示有没有案例被打开

	var openFlag=false;


	oBtn.onclick=showOrCloswAllList;
	oBtnList.onclick=showOrClosMenu;

	//show? 

	var showFlag=true;
	//show menu
	var show=false;

	//show??or??close

	function showOrCloswAllList(){

		if (showFlag) {

			if(!openFlag){

				oMain.style.display="block";
				libo.startMove(oMain,{opacity:80},30,function(){
					indexLists.style.display="none";
				});

				showFlag=false;

			}else{
				oMain.style.display="block";
				libo.startMove(oMain,{opacity:80},30,function(){
					indexLists.style.display="none";
					mainWin.style.display="none";
				});

				showFlag=false;

			}
		}else{

			if(!openFlag){
				indexLists.style.display="block";  
				libo.startMove(oMain,{opacity:0},30,function(){
					oMain.style.display="none";
					// mainWin.style.display="block"; //暂时不用这个
				});

				showFlag=true;
			}else{
				// indexLists.style.display="block";
				libo.startMove(oMain,{opacity:0},30,function(){
					oMain.style.display="none";
					mainWin.style.display="block";
				});

				showFlag=true;
			}

			
		}

		//同时检测menu
		if(show){
			var changeWidth=artLists.offsetWidth;
			libo.startMove(sideNav,{left:sideNav.offsetLeft-changeWidth},30,function(){
				oBtnList.innerHTML="menu";
			});
			libo.startMove(showWin,{left:showWin.offsetLeft-changeWidth},30);
			show=false;
		}
	}

	//showMenu??

	function showOrClosMenu(){
		
		var changeWidth=artLists.offsetWidth;

		if(!show){
			libo.startMove(sideNav,{left:sideNav.offsetLeft+changeWidth},30,function(){
				oBtnList.innerHTML="back";
			});
			libo.startMove(showWin,{left:showWin.offsetLeft+changeWidth},30);
			show=true;
			
			
		}else{
			libo.startMove(sideNav,{left:sideNav.offsetLeft-changeWidth},30,function(){
				oBtnList.innerHTML="menu";
			});
			libo.startMove(showWin,{left:showWin.offsetLeft-changeWidth},30);
			show=false;
			
		}
		
	}

	//给index的lists进行布局转换

	(function changeIndexLists(){
		for(var i=0;i<aIndexLists.length;i++){
			aIndexLists[i].style.left=aIndexLists[i].offsetLeft+"px";
			aIndexLists[i].style.top=aIndexLists[i].offsetTop+"px";
		}
		for(var i=0;i<aIndexLists.length;i++){
			aIndexLists[i].style.position="absolute";
			aIndexLists[i].style.margin="0";
		}
	}());


	//给index的lists添加拖动事件
	libo.drag(indexLists,aIndexLists);

	//自执行函数给所有的lists iframe 添加双击事件
	(function(){
		for(var i=0;i<ListsBtns.length;i++){
			ListsBtns[i].index=i;
			ListsBtns[i].ondblclick=function(){
				indexLists.style.display="none";
				mainWin.style.display="block";
				Tiframe.src=this.getAttribute("data-url");	

				openFlag=true;

				//检测原始菜单是否展开
				if(!showFlag){
					showOrCloswAllList();
				}
			}
		}
	}());
</script>
</body>
</html>