<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Header</title>
	<link rel="stylesheet" type="text/css" href="../Fcss/index.css" />
	<script type="text/javascript" src="../Fjs/jquery-1.8.3.min.js"></script>
	<script type="text/javascript" src="../Fjs/Animate.js"></script>
</head>
<body>
	<div id="container">
		<div class="main">
			<div class="side-nav">
				<div class="artLists">
					<ul class="side-lists">
						<li class="li1 toIframe" data-url="../ProjectLists/拼图/index.html">拼图</li>
						<li class="li2 toIframe" data-url="general.html">shaidhu</li>
						<li class="li3 toIframe" data-url="general.html">shdha</li>
						<li class="li4 toIframe" data-url="general.html">jhdahd</li>
						<li class="li5 toIframe" data-url="general.html">dajhd</li>
						<li class="li6 toIframe" data-url="general.html">dasdhuahdu</li>
						<li class="li7 toIframe" data-url="general.html">jdiajd</li>
						<li class="li8 toIframe" data-url="general.html">huahdu</li>
					</ul>
				</div>
				<div class="menuList">
					<ul>
						<li style="cursor:pointer;background:blue;color:#fff;" class="btn-menu">menu</li>
					</ul>
				</div>
			</div>
			<div class="show-win">
				<ul class="win-lists">
					<li class="li1 toIframe" data-url="../ProjectLists/拼图/index.html">拼图</li>
					<li class="li2 toIframe" data-url="general.html">shaidhu</li>
					<li class="li3 toIframe" data-url="general.html">shdha</li>
					<li class="li4 toIframe" data-url="general.html">jhdahd</li>
					<li class="li5 toIframe" data-url="general.html">dajhd</li>
					<li class="li6 toIframe" data-url="general.html">dasdhuahdu</li>
					<li class="li7 toIframe" data-url="general.html">jdiajd</li>
					<li class="li8 toIframe" data-url="general.html">huahdu</li>
				</ul>
			</div>
		</div>
		<ul class="index-lists">
			<li class="drag li1 toIframe puzzle" data-url="../ProjectLists/拼图/index.html">拼图</li>
			<li class="drag li2 toIframe" data-url="general.html">22shaidhu</li>
			<li class="drag li3 toIframe" data-url="general.html">33shdha</li>
			<li class="drag li4 toIframe" data-url="general.html">jhdahd</li>
			<li class="drag li5 toIframe" data-url="general.html">dajhd</li>
			<li class="drag li6 toIframe" data-url="general.html">dasdhuahdu</li>
			<li class="drag li7 toIframe" data-url="general.html">jdiajd</li>
			<li class="drag li8 toIframe" data-url="general.html">huahdu</li>
		</ul>

		<div class="foot-nav">
			<ul class="nav">
				<li class="show-menu"></li>
			</ul>
		</div>
		<div class="containerWins">
			<iframe   name="containerWins" src=""></iframe>
		</div>


	</div>







<script type="text/javascript">

    //先使用构造函数构造库对象
    var libo=new Libo();

    //这些变量的定义都用自执行函数,然后给window注册
    (function(){

        var args={};
        //click show menu
        args.oBtn=libo.getByClass("show-menu")[0];

        //foot nav
        args.footNav=libo.getByClass("foot-nav")[0];

        //menu
        args.oMain=libo.getByClass("main")[0];

        //side nav
        args.sideNav=libo.getByClass("side-nav")[0];
        args.artLists=libo.getByClass("artLists")[0];
        args.menuList=libo.getByClass("menuList")[0];
        args.oBtnList=libo.getByClass("btn-menu")[0];

        //window iframe

        args.showWin=libo.getByClass("show-win")[0];

        //index lists

        args.indexLists=libo.getByClass("index-lists")[0];
        args.aIndexLists=args.indexLists.getElementsByTagName("li");

        //all li to iframe
        args.mainWin=libo.getByClass("containerWins")[0];
        args.ListsBtns=libo.getByClass("toIframe");
   

        args.Tiframe=document.querySelector("iframe");

        //这个标志表示有没有案例被打开

        args.openFlag=false;

        //show?
        args.showFlag=true;

        //show menu
        args.show=false;
        

        //给window注册
        window["args"]=args;
        
    }());

    args.oBtn.onclick=showOrCloswAllList;
    args.oBtnList.onclick=showOrClosMenu;
	//show??or??close

	function showOrCloswAllList(){

		if (args.showFlag) {

			if(!args.openFlag){

				libo.css(args.oMain,"display","block");
				libo.startMove(args.oMain,{opacity:80},30,function(){
					libo.css(args.indexLists,"display","none");
				});

				args.showFlag=false;

			}else{
				libo.css(args.oMain,"display","block");
				libo.startMove(args.oMain,{opacity:80},30,function(){
					libo.css(args.indexLists,"display","none");
					libo.css(args.mainWin,"display","none");
				});

				args.showFlag=false;

			}
		}else{

			if(!args.openFlag){
				args.indexLists.style.display="block";  
				libo.startMove(args.oMain,{opacity:0},30,function(){
					libo.css(args.oMain,"display","none");
					// mainWin.style.display="block"; //暂时不用这个
				});

				args.showFlag=true;
			}else{

				libo.startMove(args.oMain,{opacity:0},30,function(){

					libo.css(args.oMain,"display","none");
					libo.css(args.mainWin,"display","block");
				});

				args.showFlag=true;
			}

			
		}

		//同时检测menu
		if(args.show){
			var changeWidth=args.artLists.offsetWidth;
			libo.startMove(args.sideNav,{left:args.sideNav.offsetLeft-changeWidth},30,function(){
				args.oBtnList.innerHTML="menu";
			});
			libo.startMove(args.showWin,{left:args.showWin.offsetLeft-changeWidth},30);
			args.show=false;
		}
	}

	//showMenu??

	function showOrClosMenu(){
		
		var changeWidth=args.artLists.offsetWidth;

		if(!args.show){
			libo.startMove(args.sideNav,{left:args.sideNav.offsetLeft+changeWidth},30,function(){
				args.oBtnList.innerHTML="back";
			});
			libo.startMove(args.showWin,{left:args.showWin.offsetLeft+changeWidth},30);
			args.show=true;
			
			
		}else{
			libo.startMove(args.sideNav,{left:args.sideNav.offsetLeft-changeWidth},30,function(){
				args.oBtnList.innerHTML="menu";
			});
			libo.startMove(args.showWin,{left:args.showWin.offsetLeft-changeWidth},30);
			args.show=false;
			
		}
		
	}

	//给index的lists进行布局转换(都自执行闭包函数)

	(function changeIndexLists(){
		for(var i=0;i<args.aIndexLists.length;i++){
			args.aIndexLists[i].style.left=args.aIndexLists[i].offsetLeft+"px";
			args.aIndexLists[i].style.top=args.aIndexLists[i].offsetTop+"px";
		}
		for(var j=0;j<args.aIndexLists.length;j++){
			args.aIndexLists[j].style.position="absolute";
			args.aIndexLists[j].style.margin="0";
		}
	}());


	//给index的lists添加拖动事件
	libo.drag(args.indexLists,args.aIndexLists);

	//自执行函数给所有的lists iframe 添加双击事件
	(function(){
		for(var i=0;i<args.ListsBtns.length;i++){
			args.ListsBtns[i].index=i;
			args.ListsBtns[i].ondblclick=function(){
				// args.indexLists.style.display="none";
				// args.mainWin.style.display="block";
				libo.css(args.indexLists,"display","none");
				libo.css(args.mainWin,"display","block");
				args.Tiframe.src=this.getAttribute("data-url");	

				args.openFlag=true;

				//检测原始菜单是否展开
				if(!args.showFlag){
					showOrCloswAllList();
				}
			}
		}
	}());
</script>
</body>
</html>